{"version":3,"sources":["webpack:///./src/views/tables/table-to-image.vue","webpack:///table-to-image.vue","webpack:///./src/views/tables/table-to-image.vue?e6bf","webpack:///./src/views/tables/table-to-image.vue?a97c"],"names":[],"mappings":";;;;;;AACA;AACA,uBAA0Q;;AAE1Q;AACA;AACA;AACA;AACA,yBAAsG;AACtG;AACA;AACA;AACA;AACA;AACA;AACA,+EAA+E,iDAAiD,IAAI;AACpI,mCAAmC;;AAEnC;AACA,YAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,CAAC;;AAED;;;;;;;;;;;;;;;ACKA;;;;;;;;AAEA;;;6BAEA;uBACA;;uBAGA;qBAEA;AAHA,aADA;uBAMA;qBACA;mDACA;qCACA;yFACA;sFAEA;;;;kCAGA;mCAEA;AAHA;AADA,uBAKA;AAEA;AAfA;uBAiBA;qBACA;mDACA;;;qCAGA;iEACA;uCAEA;AAJA;AADA,uBAMA,+BACA;8BAEA;AADA,uBAEA,sEACA;;;2CAGA;yCAEA;AAHA;AADA,2BAKA;AAGA;AAEA;AA1BA;uBA4BA;qBACA;mDACA;;;qCAGA;8DACA;uCAEA;AAJA;AADA,uBAMA,4BACA;8BAEA;AADA,uBAEA,mEACA;;;2CAGA;yCAEA;AAHA;AADA,mDAKA;AAGA;AAEA;AA1BA;uBA4BA;qBACA;mDACA;4DACA;AAEA;AANA;uBAQA;qBACA;mDACA;oFACA;AAIA;AARA;AArFA;AA8FA;;;kDAEA;uBACA;yCACA;;kEAEA;2DACA;gEACA;;mEAGA;gEAEA;AAHA,qBADA;mEAMA;gEAEA;AAHA;mEAKA;gEAGA;AAJA;yDAKA;gCAEA;AApBA;AAqBA;mBACA;AACA;8CACA;yBACA;sCACA;mCACA;yBACA;mCACA;uCACA;AACA;4CACA;qBACA;+CAaA;;;uDAGA;oCACA;mEACA;mDACA;6BACA;+DACA;8CACA;sBACA;8CAEA;AAEA;AAZA;AAcA;AAlEA;AAjGA,E;;;;;;;ACrCA,yC;;;;;;;ACAA,gBAAgB,mBAAmB,aAAa,0BAA0B;AAC1E;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,C","file":"13.chunk.js","sourcesContent":["\n/* styles */\nrequire(\"!!../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?minimize!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-3fecf6a9\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!autoprefixer-loader!less-loader!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./table-to-image.vue\")\n\nvar Component = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./table-to-image.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3fecf6a9\\\"}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./table-to-image.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\nComponent.options.__file = \"/Users/august/Open/iview-admin/src/views/tables/table-to-image.vue\"\nif (Component.esModule && Object.keys(Component.esModule).some(function (key) {return key !== \"default\" && key !== \"__esModule\"})) {console.error(\"named exports are not supported in *.vue files.\")}\nif (Component.options.functional) {console.error(\"[vue-loader] table-to-image.vue: functional components are not supported with templates, they should use render functions.\")}\n\n/* hot reload */\nif (module.hot) {(function () {\n  var hotAPI = require(\"vue-loader/node_modules/vue-hot-reload-api\")\n  hotAPI.install(require(\"vue\"), false)\n  if (!hotAPI.compatible) return\n  module.hot.accept()\n  if (!module.hot.data) {\n    hotAPI.createRecord(\"data-v-3fecf6a9\", Component.options)\n  } else {\n    hotAPI.reload(\"data-v-3fecf6a9\", Component.options)\n  }\n})()}\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/tables/table-to-image.vue\n// module id = 696\n// module chunks = 13","<style lang=\"less\">\n    @import '../../styles/common.less';\n    @import './components/table.less';\n</style>\n\n\n<template>\n    <div>\n        <Row>\n            <Card>\n                <p slot=\"title\">\n                    <Icon type=\"images\"></Icon>\n                    将表格数据连同样式一起以图片形式导出\n                </p>\n                <Row>\n                    <Col span=\"18\">\n                        <Table :data=\"tableData1\" :columns=\"tableColumns1\" stripe ref=\"table2image\"></Table>\n                    </Col>\n                    <Col span=\"6\" class=\"padding-left-20\">\n                        <div id=\"showImage\" class=\"margin-bottom-10\">\n                            <span>输入文件名：</span>\n                            <Input v-model=\"imageName\" icon=\"document\" placeholder=\"请输入图片名\" style=\"width: 190px\"/>\n                        </div>\n                        <Button type=\"primary\" @click=\"exportImage\">导出表格为图片</Button>\n                        <div id=\"showImage\" class=\"show-image margin-top-20\">\n                            <img id=\"exportedImage\" />\n                        </div>\n                    </Col>\n                </Row>\n            </Card>\n        </Row>\n    </div>\n</template>\n\n<script>\nimport html2canvas from 'html2canvas';\nexport default {\n    data () {\n        return {\n            tableData1: this.mockTableData1(),\n            imageName: '',\n            tableColumns1: [\n                {\n                    title: '名称',\n                    key: 'name'\n                },\n                {\n                    title: '状态',\n                    key: 'status',\n                    render: (h, params) => {\n                        const row = params.row;\n                        const color = row.status === 1 ? 'blue' : row.status === 2 ? 'green' : 'red';\n                        const text = row.status === 1 ? '构建中' : row.status === 2 ? '构建完成' : '构建失败';\n\n                        return h('Tag', {\n                            props: {\n                                type: 'dot',\n                                color: color\n                            }\n                        }, text);\n                    }\n                },\n                {\n                    title: '画像内容',\n                    key: 'portrayal',\n                    render: (h, params) => {\n                        return h('Poptip', {\n                            props: {\n                                trigger: 'hover',\n                                title: params.row.portrayal.length + '个画像',\n                                placement: 'bottom'\n                            }\n                        }, [\n                            h('Tag', params.row.portrayal.length),\n                            h('div', {\n                                slot: 'content'\n                            }, [\n                                h('ul', this.tableData1[params.index].portrayal.map(item => {\n                                    return h('li', {\n                                        style: {\n                                            textAlign: 'center',\n                                            padding: '4px'\n                                        }\n                                    }, item);\n                                }))\n                            ])\n                        ]);\n                    }\n                },\n                {\n                    title: '选定人群数',\n                    key: 'people',\n                    render: (h, params) => {\n                        return h('Poptip', {\n                            props: {\n                                trigger: 'hover',\n                                title: params.row.people.length + '个客群',\n                                placement: 'bottom'\n                            }\n                        }, [\n                            h('Tag', params.row.people.length),\n                            h('div', {\n                                slot: 'content'\n                            }, [\n                                h('ul', this.tableData1[params.index].people.map(item => {\n                                    return h('li', {\n                                        style: {\n                                            textAlign: 'center',\n                                            padding: '4px'\n                                        }\n                                    }, item.n + '：' + item.c + '人');\n                                }))\n                            ])\n                        ]);\n                    }\n                },\n                {\n                    title: '取样时段',\n                    key: 'time',\n                    render: (h, params) => {\n                        return h('div', '近' + params.row.time + '天');\n                    }\n                },\n                {\n                    title: '更新时间',\n                    key: 'update',\n                    render: (h, params) => {\n                        return h('div', this.formatDate(this.tableData1[params.index].update));\n                    }\n                }\n            ]\n        };\n    },\n    methods: {\n        mockTableData1 () {\n            let data = [];\n            for (let i = 0; i < 10; i++) {\n                data.push({\n                    name: '商圈' + Math.floor(Math.random() * 100 + 1),\n                    status: Math.floor(Math.random() * 3 + 1),\n                    portrayal: ['城市渗透', '人群迁移', '消费指数', '生活指数', '娱乐指数'],\n                    people: [\n                        {\n                            n: '客群' + Math.floor(Math.random() * 100 + 1),\n                            c: Math.floor(Math.random() * 1000000 + 100000)\n                        },\n                        {\n                            n: '客群' + Math.floor(Math.random() * 100 + 1),\n                            c: Math.floor(Math.random() * 1000000 + 100000)\n                        },\n                        {\n                            n: '客群' + Math.floor(Math.random() * 100 + 1),\n                            c: Math.floor(Math.random() * 1000000 + 100000)\n                        }\n                    ],\n                    time: Math.floor(Math.random() * 7 + 1),\n                    update: new Date()\n                });\n            }\n            return data;\n        },\n        formatDate (date) {\n            const y = date.getFullYear();\n            let m = date.getMonth() + 1;\n            m = m < 10 ? '0' + m : m;\n            let d = date.getDate();\n            d = d < 10 ? ('0' + d) : d;\n            return y + '-' + m + '-' + d;\n        },\n        exportImage () {\n            let vm = this;\n            let table = this.$refs.table2image.$el;\n            /* 这部分代码用来解决生成的图片不清晰的问题 */\n            // let tableWidth = table.offsetWidth;\n            // let tableHeight = table.offsetHeight;\n            // let canvas = document.createElement('canvas');\n            // canvas.width = tableWidth * 2;\n            // canvas.height = tableHeight * 2;\n            // canvas.style.width = tableWidth + 'px';\n            // canvas.style.height = tableHeight + 'px';\n            // document.body.appendChild(canvas);\n            // var context = canvas.getContext('2d');\n            // context.scale(2, 2);\n            /* 这部分代码用来解决生成的图片不清晰的问题 */\n            html2canvas(table, {\n                // canvas: canvas,\n                onrendered (image) {\n                    var url = image.toDataURL();\n                    document.getElementById('exportedImage').src = url;\n                    let a = document.createElement('a');\n                    a.href = url;\n                    a.download = vm.imageName ? vm.imageName : '未命名';\n                    document.body.appendChild(a);\n                    a.click();\n                    document.body.removeChild(a);\n                    // document.body.removeChild(canvas);\n                }\n            });\n        }\n    }\n};\n</script>\n\n\n\n// WEBPACK FOOTER //\n// table-to-image.vue?51a29a2e","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/vue-style-loader!./~/css-loader?minimize!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-3fecf6a9\",\"scoped\":false,\"hasInlineConfig\":false}!./~/autoprefixer-loader!./~/less-loader!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/views/tables/table-to-image.vue\n// module id = 780\n// module chunks = 13","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('Row', [_c('Card', [_c('p', {\n    attrs: {\n      \"slot\": \"title\"\n    },\n    slot: \"title\"\n  }, [_c('Icon', {\n    attrs: {\n      \"type\": \"images\"\n    }\n  }), _vm._v(\"\\n                将表格数据连同样式一起以图片形式导出\\n            \")], 1), _vm._v(\" \"), _c('Row', [_c('Col', {\n    attrs: {\n      \"span\": \"18\"\n    }\n  }, [_c('Table', {\n    ref: \"table2image\",\n    attrs: {\n      \"data\": _vm.tableData1,\n      \"columns\": _vm.tableColumns1,\n      \"stripe\": \"\"\n    }\n  })], 1), _vm._v(\" \"), _c('Col', {\n    staticClass: \"padding-left-20\",\n    attrs: {\n      \"span\": \"6\"\n    }\n  }, [_c('div', {\n    staticClass: \"margin-bottom-10\",\n    attrs: {\n      \"id\": \"showImage\"\n    }\n  }, [_c('span', [_vm._v(\"输入文件名：\")]), _vm._v(\" \"), _c('Input', {\n    staticStyle: {\n      \"width\": \"190px\"\n    },\n    attrs: {\n      \"icon\": \"document\",\n      \"placeholder\": \"请输入图片名\"\n    },\n    model: {\n      value: (_vm.imageName),\n      callback: function($$v) {\n        _vm.imageName = $$v\n      },\n      expression: \"imageName\"\n    }\n  })], 1), _vm._v(\" \"), _c('Button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.exportImage\n    }\n  }, [_vm._v(\"导出表格为图片\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"show-image margin-top-20\",\n    attrs: {\n      \"id\": \"showImage\"\n    }\n  }, [_c('img', {\n    attrs: {\n      \"id\": \"exportedImage\"\n    }\n  })])], 1)], 1)], 1)], 1)], 1)\n},staticRenderFns: []}\nmodule.exports.render._withStripped = true\nif (module.hot) {\n  module.hot.accept()\n  if (module.hot.data) {\n     require(\"vue-loader/node_modules/vue-hot-reload-api\").rerender(\"data-v-3fecf6a9\", module.exports)\n  }\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-3fecf6a9\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/views/tables/table-to-image.vue\n// module id = 823\n// module chunks = 13"],"sourceRoot":""}